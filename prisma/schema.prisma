generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.sqlite"
}

model Article {
  id        Int      @id @default(autoincrement())
  title     String
  content   String
  userId    String
  auth_user User @relation(fields: [userId], references: [id])
  //auth_user AuthUser @relation(fields: [userId], references: [id])
}

// model AuthUser {
//   id           String        @id @unique
//   name         String
//   username     String        @unique
//   articles     Article[]
//   auth_key     AuthKey[]
//   auth_session AuthSession[]

//   @@map("auth_user")
// }

// model AuthSession {
//   id             String   @id @unique
//   user_id        String
//   active_expires BigInt
//   idle_expires   BigInt
//   auth_user      AuthUser @relation(fields: [user_id], references: [id], onDelete: Cascade)

//   @@index([user_id])
//   @@map("auth_session")
// }


// model AuthKey {
//   id              String  @id @unique
//   user_id         String
//   hashed_password String?
//   auth_user      AuthUser @relation(fields: [user_id], references: [id], onDelete: Cascade)

//   @@index([user_id])
//   @@map("auth_key")
// }

// model AuthKey {
//   id              String   @id @unique
//   hashed_password String?
//   user_id         String
//   primary_key     Boolean
//   expires         BigInt?
//   auth_user       AuthUser @relation(fields: [user_id], references: [id], onDelete: Cascade)

//   @@index([user_id])
//   @@map("auth_key")
// }

model User {
  id           String        @id @unique
  name         String
  username     String        @unique
  articles     Article[]
  key     Key[]
  auth_session Session[]
}

model Session {
  id             String   @id @unique
  user_id        String
  active_expires BigInt
  idle_expires   BigInt
  user      User @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@index([user_id])
}

model Key {
  id              String   @id @unique
  hashed_password String?
  user_id         String
  // primary_key     Boolean
  user       User @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@index([user_id])
}
